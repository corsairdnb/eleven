$(function(){function t(){$(".event-history__container").each(function(t,e){var n=$(e),o=n.width();o>document.documentElement.clientWidth?n.width(r.width()):n.removeAttr("style")}),e()}function e(){var t;if(document.documentElement.clientWidth>=1024){var e=parseInt($(".content-video").height())+parseInt($(".content-audio").height())+parseInt($(".content-events").height());t=e>document.documentElement.clientHeight?e:document.documentElement.clientHeight-76}else t=document.documentElement.clientHeight;c.height(t)}function n(){var t=document.createElement("script");document.body.appendChild(t),t.onload=function(){a()},t.src="//vk.com/js/api/openapi.js?136"}function o(){VK.Widgets.Auth("vk_auth",{width:"auto",onAuth:function(t){window.location.href="http://11thradio.com",window.location.reload()}})}function i(){VK.Widgets.Comments("vk_comments",{limit:100,attach:"*",autoPublish:0})}function a(){VK.init({apiId:5786458,onlyWidgets:!0}),VK.Auth.getLoginStatus(function(t){"connected"===t.status?i():o()})}function s(){var t=new XMLHttpRequest;t.open("GET","http://11thradio.com:8011/status-json.xsl",!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState)if(200!=t.status)console.log(t.status+": "+t.statusText);else{var e=JSON.parse(t.responseText);l.textContent=e.icestats.source[0].title,d.src="http://11thradio.com/coverarts/dnb/"+e.icestats.source[0].title.replace(/ /g,"_")+".jpg"}}}$(".nav-mobile__burger").on("click",function(){$(".nav-mobile").toggleClass("nav-mobile--opened")});var r=$(".event-history"),c=$(".layout-chat");t(),$(window).resize($.throttle(250,t)),$(window).scroll($.throttle(250,e)),n(),e();var l=document.querySelector(".track-info__name"),d=document.querySelector(".track-info__img");setInterval(function(t){try{t()}catch(t){console.log(t)}},2e4,s),s();var h=$(".controls__toggle"),m=$(".player");isMobile.any&&$("html").addClass("is-mobile"),$(".play, .pause").on("click",function(){h.hasClass("controls__toggle--stopped")?(m.attr("src","http://11thradio.com:8011/wavetactics192kbps.mp3"),h.removeClass("controls__toggle--stopped")):(m.attr("src",""),h.addClass("controls__toggle--stopped"))});var u=$(".event-history__item"),v=$(".event-history__title"),p=$(".event-history__text"),_=(new Swiper(".event-history__container",{nextButton:".event-history__next",prevButton:".event-history__prev",slidesPerView:7,onTouchStart:function(t){t.container.addClass("event-history__container--animating")},onTouchEnd:function(t){t.container.removeClass("event-history__container--animating")},onTap:function(t,e){var n=$(e.target);n.hasClass("event-history__item")||(n=n.closest(".event-history__item")),n.hasClass("swiper-slide-active")||(t.slideTo(n.index()),u.removeClass("swiper-slide-active"),n.addClass("swiper-slide-active"));var o=n.data("event-day")+" "+n.data("event-month")+" <small>("+n.data("event-weekday")+")</small> "+n.data("event-time");v.html(o),p.html(n.find(".event-history__description").html())},onInit:function(){var t=u.eq(0),e=t.data("event-day")+" "+t.data("event-month")+" <small>("+t.data("event-weekday")+")</small> "+t.data("event-time");v.html(e),p.html(t.find(".event-history__description").html())},onSlideChangeEnd:function(t){var e=u.eq(t.activeIndex),n=e.data("event-day")+" "+e.data("event-month")+" <small>("+e.data("event-weekday")+")</small> "+e.data("event-time");v.html(n),p.html(e.find(".event-history__description").html())},slideToClickedSlide:!0,breakpoints:{375:{slidesPerView:3},480:{slidesPerView:4},667:{slidesPerView:6}},threshold:10}),$('<iframe frameborder="0" allowfullscreen="1" src="https://www.youtube.com/embed/live_stream?channel=UCGnicvLKJ8M09dyELMXXg7g&autoplay=0&fs=1&enablejsapi=0&origin='+encodeURIComponent(location.origin)+'&widgetid=1" width="650" height="366" title="11th Radio Live"></iframe>'));_.on("load",function(){var t;if(!_.attr("data-ratio")){var e=parseInt(_.attr("width")),n=parseInt(_.attr("height"));t=e/n,_.attr("data-ratio",t)}_.attr("width","100%"),_.attr("height",parseInt(_.width())/_.attr("data-ratio"))}),$("#youtube").html(_),document.documentElement.clientWidth>=1024&&$(".track-info__img").popover({html:!0,trigger:"hover",delay:1e3,content:function(){return'<img class="track-info__popover-img" src="'+this.src+'" />'}})});